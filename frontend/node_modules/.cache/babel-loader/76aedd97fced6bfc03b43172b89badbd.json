{"ast":null,"code":"import { TimeoutError } from '../errors/TimeoutError.js'; // `Promise.race()` workaround (#91)\n\nexport const timeout = async (request, abortController, options) => new Promise((resolve, reject) => {\n  const timeoutID = setTimeout(() => {\n    if (abortController) {\n      abortController.abort();\n    }\n\n    reject(new TimeoutError(request));\n  }, options.timeout);\n  /* eslint-disable promise/prefer-await-to-then */\n\n  void options.fetch(request).then(resolve).catch(reject).then(() => {\n    clearTimeout(timeoutID);\n  });\n  /* eslint-enable promise/prefer-await-to-then */\n});\nexport const delay = async ms => new Promise(resolve => {\n  setTimeout(resolve, ms);\n});","map":{"version":3,"sources":["../../source/utils/time.ts"],"names":[],"mappings":"AAAA,SAAQ,YAAR,QAA2B,2BAA3B,C,CAOA;;AACA,OAAO,MAAM,OAAO,GAAG,OACtB,OADsB,EAEtB,eAFsB,EAGtB,OAHsB,KAKtB,IAAI,OAAJ,CAAY,CAAC,OAAD,EAAU,MAAV,KAAoB;AAC/B,QAAM,SAAS,GAAG,UAAU,CAAC,MAAK;AACjC,QAAI,eAAJ,EAAqB;AACpB,MAAA,eAAe,CAAC,KAAhB;AACA;;AAED,IAAA,MAAM,CAAC,IAAI,YAAJ,CAAiB,OAAjB,CAAD,CAAN;AACA,GAN2B,EAMzB,OAAO,CAAC,OANiB,CAA5B;AAQA;;AACA,OAAK,OAAO,CACV,KADG,CACG,OADH,EAEH,IAFG,CAEE,OAFF,EAGH,KAHG,CAGG,MAHH,EAIH,IAJG,CAIE,MAAK;AACV,IAAA,YAAY,CAAC,SAAD,CAAZ;AACA,GANG,CAAL;AAOA;AACA,CAlBD,CALM;AAyBP,OAAO,MAAM,KAAK,GAAG,MAAO,EAAP,IAAsB,IAAI,OAAJ,CAAY,OAAO,IAAG;AAChE,EAAA,UAAU,CAAC,OAAD,EAAU,EAAV,CAAV;AACA,CAF0C,CAApC","sourceRoot":"","sourcesContent":["import { TimeoutError } from '../errors/TimeoutError.js';\n// `Promise.race()` workaround (#91)\nexport const timeout = async (request, abortController, options) => new Promise((resolve, reject) => {\n    const timeoutID = setTimeout(() => {\n        if (abortController) {\n            abortController.abort();\n        }\n        reject(new TimeoutError(request));\n    }, options.timeout);\n    /* eslint-disable promise/prefer-await-to-then */\n    void options\n        .fetch(request)\n        .then(resolve)\n        .catch(reject)\n        .then(() => {\n        clearTimeout(timeoutID);\n    });\n    /* eslint-enable promise/prefer-await-to-then */\n});\nexport const delay = async (ms) => new Promise(resolve => {\n    setTimeout(resolve, ms);\n});\n//# sourceMappingURL=time.js.map"]},"metadata":{},"sourceType":"module"}